<!doctype html>
<html class="scroll-smooth"
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="generator" content="Laika 1.0.0" />
    <title>Assets</title>
     
    <meta name="description" content="docs" />
    
    <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?version=4.8.0&features=es6"></script>
    <script
      id="MathJax-script"
      async
      src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"
    ></script>
    <link
      href="https://fonts.googleapis.com/css?family=Source+Code+Pro:400|Source+Sans+Pro:300,400,600"
      rel="stylesheet"
      type="text/css"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Crimson+Pro:400"
      rel="stylesheet"
      type="text/css"
    />
    <link rel="stylesheet" type="text/css" href="../../css/creative-scala.css" /> <script src="../../js/solution.js"></script>
    <script>
      /* for avoiding page load transitions */
    </script>
  </head>

  <body>
    <header>
      <div id="topbar">
        <nav id="topbar">
          <button
            class="text-sm text-pink-800 font-sans font-semibold hover:text-pink-600 focus:text-pink-600"
            popovertarget="topbar-nav"
          >
            Contents
          </button>
          <div id="topbar-nav" popover="auto">
            <div id="topbar-nav-container" class="flex justify-items-center items-center h-dvh w-dvw">
              <div
                class="p-4 mx-auto rounded-md bg-white border border-slate-900 max-h-4/5 w-4/5 overflow-y-auto overflow-x-auto flex flex-col items-end"
              >
                <button
                  class="text-slate-900 hover:text-pink-800 focus:text-pink-800"
                  popovertarget="topbar-nav"
                  popovertargetaction="hide"
                >
                  ‚úï
                </button>
                <div class="w-full">
                  <ul class="nav-list">
                    <li class="level1 nav-node"><a href="../../">Krop</a></li>
                    <li class="level2 nav-leaf"><a href="../../quick-start.html">Quick Start</a></li>
                    <li class="level2 nav-node"><a href="../../overview/">Overview</a></li>
                    <li class="level3 nav-leaf"><a href="../../overview/architecture.html">Architecture</a></li>
                    <li class="level3 nav-leaf"><a href="../../overview/principles.html">Principles</a></li>
                    <li class="level2 nav-leaf"><a href="../../application.html">Application</a></li>
                    <li class="level2 nav-leaf"><a href="../../server.html">Server</a></li>
                    <li class="level2 nav-node"><a href="../../model/">Models</a></li>
                    <li class="level3 nav-leaf"><a href="../../model/sqlite.html">SQLite</a></li>
                    <li class="level2 nav-leaf"><a href="../../views.html">View</a></li>
                    <li class="level2 nav-node"><a href="../">Controller</a></li>
                    <li class="level3 nav-node"><a href="index.html">Routing</a></li>
                    <li class="level4 nav-leaf"><a href="request.html">Request</a></li>
                    <li class="level4 nav-leaf"><a href="paths.html">Paths</a></li>
                    <li class="level4 nav-leaf"><a href="entities.html">Entities</a></li>
                    <li class="level4 nav-leaf"><a href="codecs.html">Codecs</a></li>
                    <li class="level4 active nav-leaf"><a href="#">Assets</a></li>
                    <li class="level4 nav-leaf"><a href="response/">Response</a></li>
                    <li class="level3 nav-leaf"><a href="../handler.html">Handlers</a></li>
                    <li class="level2 nav-leaf"><a href="../../tools.html">Tools</a></li>
                    <li class="level2 nav-leaf"><a href="../../development.html">Developing Krop</a></li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </nav>
        <nav id="home"><a class="text-link" href="../../">Krop</a></nav>
        <nav id="external"><a href="https://discord.gg/rRhcFbJxVG">Community<span><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' class='lucide lucide-square-arrow-out-up-right' > <path d='M21 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h6' /> <path d='m21 3-9 9' /> <path d='M15 3h6v6' /> </svg></span></a> <a href="https://javadoc.io/doc/org.creativescala/krop-docs_3/latest">API<span><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' class='lucide lucide-square-arrow-out-up-right' > <path d='M21 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h6' /> <path d='m21 3-9 9' /> <path d='M15 3h6v6' /> </svg></span></a> <a href="https://github.com/creativescala/krop">Source<span><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' class='lucide lucide-square-arrow-out-up-right' > <path d='M21 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h6' /> <path d='m21 3-9 9' /> <path d='M15 3h6v6' /> </svg></span></a></nav>
      </div>
    </header>

    <main class="max-w-8xl mx-auto my-8 min-h-screen flex">
      <!-- Left sticky table of contents -->
      <nav
        id="sitebar"
        class="hidden lg:block min-w-64 max-w-md mr-8 sticky top-24 self-start flex-shrink-0"
      >
        <div class="max-h-[calc(100vh-6rem)] overflow-y-auto">
          <ul class="nav-list">
            <li class="level1 nav-node"><a href="../../">Krop</a></li>
            <li class="level2 nav-leaf"><a href="../../quick-start.html">Quick Start</a></li>
            <li class="level2 nav-node"><a href="../../overview/">Overview</a></li>
            <li class="level3 nav-leaf"><a href="../../overview/architecture.html">Architecture</a></li>
            <li class="level3 nav-leaf"><a href="../../overview/principles.html">Principles</a></li>
            <li class="level2 nav-leaf"><a href="../../application.html">Application</a></li>
            <li class="level2 nav-leaf"><a href="../../server.html">Server</a></li>
            <li class="level2 nav-node"><a href="../../model/">Models</a></li>
            <li class="level3 nav-leaf"><a href="../../model/sqlite.html">SQLite</a></li>
            <li class="level2 nav-leaf"><a href="../../views.html">View</a></li>
            <li class="level2 nav-node"><a href="../">Controller</a></li>
            <li class="level3 nav-node"><a href="index.html">Routing</a></li>
            <li class="level4 nav-leaf"><a href="request.html">Request</a></li>
            <li class="level4 nav-leaf"><a href="paths.html">Paths</a></li>
            <li class="level4 nav-leaf"><a href="entities.html">Entities</a></li>
            <li class="level4 nav-leaf"><a href="codecs.html">Codecs</a></li>
            <li class="level4 active nav-leaf"><a href="#">Assets</a></li>
            <li class="level4 nav-leaf"><a href="response/">Response</a></li>
            <li class="level3 nav-leaf"><a href="../handler.html">Handlers</a></li>
            <li class="level2 nav-leaf"><a href="../../tools.html">Tools</a></li>
            <li class="level2 nav-leaf"><a href="../../development.html">Developing Krop</a></li>
          </ul>
        </div>
      </nav>
      <div id="contentbar" class="mx-auto flex-1">
        <div class="max-w-prose mx-auto">
          <div id="content"><h1 id="assets" class="title">Assets</h1>
<p>Asset routes in Krop provide special support for serving assets. Assets are files, such as CSS stylesheets, that are part of your web application and not written in Scala. An asset route does two things:</p>
<ol class="arabic">
  <li>
    <p>It monitors a directory of files, calculating a hash of each file in the directory and updating that hash whenever it changes.</p>
  </li>
  <li>
    <p>It constructs names for asset files that include the hash of the file. The means each version of the file is served with a unique file name, preventing web browsers from caching and using out-dated versions of assets.</p>
  </li>
</ol>

<h2 id="using-assets" class="section">Using Assets</h2>
<p>If you aren&#39;t using the <a href="../../quick-start.html">project template</a> you will need to add the following dependency to your <code>build.sbt</code>:</p>
<pre><code class="nohighlight"><span class="identifier">libraryDependencies</span><span> += </span><span class="string-literal">&quot;org.creativescala&quot;</span><span> %% </span><span class="string-literal">&quot;krop-asset&quot;</span><span> % </span><span class="string-literal">&quot;0.10.1&quot;</span></code></pre>

<h2 id="creating-an-asset-route" class="section">Creating an Asset Route</h2>
<p>An <a class="api" href="https://javadoc.io/doc/org.creativescala/krop-docs_3/latest/krop/asset/AssetRoute.html">AssetRoute</a> is constructed by giving it a <a class="api" href="https://javadoc.io/doc/org.creativescala/krop-docs_3/latest/krop/route/Path.html">Path</a> under which to serve assets, and a <code>String</code> specifying a directory to monitor. So, for example, if we want to serve assets under the path <code>/assets</code>, and those assets live under the directory <code>resources/myapp/assets</code> (relative the project root directory) we would create an <code>AssetRoute</code> as</p>
<pre><code class="nohighlight"><span class="keyword">import</span><span> </span><span class="identifier">krop</span><span>.</span><span class="identifier">all</span><span>.*
</span><span class="keyword">import</span><span> </span><span class="identifier">krop</span><span>.</span><span class="identifier">asset</span><span>.</span><span class="type-name">AssetRoute</span><span>

</span><span class="keyword">val</span><span> </span><span class="identifier">assets</span><span> = </span><span class="type-name">AssetRoute</span><span>(</span><span class="type-name">Path</span><span> / </span><span class="string-literal">&quot;assets&quot;</span><span>, </span><span class="string-literal">&quot;resources/myapp/assets&quot;</span><span>)</span></code></pre>
<p>Note we need to <code>import krop.asset.AssetRoute</code>; this not part of the core library we import with <code>krop.all.*</code>.</p>
<p>An asset route is also a handler, which we add to our application in the usual way. Code like the following will do.</p>
<pre><code class="nohighlight"><span class="identifier">assets</span><span>.</span><span class="identifier">orElse</span><span>(</span><span class="identifier">theApplication</span><span>)</span></code></pre>

<h2 id="linking-to-an-asset" class="section">Linking to an Asset</h2>
<p>Call the <code>asset</code> method on an asset route when you want to link to an asset, for example in a template. Pass the method the path to the asset, relative to the directory you passed the asset route on construction.</p>
<p>For example, if we have a file <code>resources/myapp/assets/css/myapp.css</code> we would call</p>
<pre><code class="nohighlight"><span class="identifier">assets</span><span>.</span><span class="identifier">asset</span><span>(</span><span class="string-literal">&quot;css/myapp.css&quot;</span><span>)
</span><span class="comment">// res: String = /assets/css/myapp-1234.css</span></code></pre>
<p>Notice the result includes the <code>Path</code> we created the asset route with. It also includes the value of a hash of the file (in the example replaced with <code>1234</code> for simplicity.) This value changes every time the file changes, and thus prevents the browser from using a stale cached copy.</p>
<p>The <code>asset</code> method requires a given <code>KropRuntime</code> value, which is available to all handlers when they handle a request.</p></div>
          <div class="flex flex-row justify-between">
            <a class="pagenav" href="codecs.html">‚ÜêCodecs</a> <a class="pagenav" href="response/">Response‚Üí</a>
          </div>
        </div>
        <footer>
          Copyright &copy; Noel Welsh. Built with
          <span class="hover:text-pink-900">üíñ</span>
        </footer>
      </div>
      <!-- Right sticky page contents -->
      <nav
        id="pagebar"
        class="hidden lg:block min-w-60 max-w-64 ml-8 sticky top-24 self-start flex-shrink-0"
      >
        <div class="max-h-[calc(100vh-6rem)] overflow-y-auto">
          <p>On This Page</p>
          <ul class="nav-list">
            <li class="level1 nav-leaf"><a href="#using-assets">Using Assets</a></li>
            <li class="level1 nav-leaf"><a href="#creating-an-asset-route">Creating an Asset Route</a></li>
            <li class="level1 nav-leaf"><a href="#linking-to-an-asset">Linking to an Asset</a></li>
          </ul>
        </div>
      </nav>
    </main>
  </body>
</html>
