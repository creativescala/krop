<!doctype html>
<html lang="">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Laika 0.19.0" />
    <title>Request</title>
    
    
    <meta name="description" content="docs" />
    
    <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:400|Source+Sans+Pro:300,400,600"
        rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Crimson+Pro:400" rel="stylesheet" type="text/css">
    <link rel="stylesheet" type="text/css" href="../creative-scala.css" />
    
    <script> /* for avoiding page load transitions */</script>
</head>

<body>
    <nav id="topbar"><p><a href="index.html">←</a></p>
<p><a href="../../">Krop</a></p>
<p><a href="paths.html">→</a></p></nav>
    <nav id="sidebar">
        <ul class="nav-list">
          <li class="level1 nav-leaf"><a href="../">Krop</a></li>
          <li class="level1 nav-leaf"><a href="../quick-start.html">Quick Start</a></li>
          <li class="level1 nav-leaf"><a href="../principles.html">Principles</a></li>
          <li class="level1 nav-leaf"><a href="../application.html">Application</a></li>
          <li class="level1 nav-leaf"><a href="../server.html">Server</a></li>
          <li class="level1 nav-node"><a href="index.html">Routing</a></li>
          <li class="level2 active nav-leaf"><a href="#">Request</a></li>
          <li class="level2 nav-leaf"><a href="paths.html">Paths</a></li>
          <li class="level2 nav-leaf"><a href="response.html">Response</a></li>
        </ul>
    </nav>

    <div id="content">
        <main class="content">
            <h1 id="request" class="title">Request</h1>
            <p>A <a class="api" href="https://javadoc.io/doc/org.creativescala/krop-docs_3/latest/krop/route/Request.html">Request</a> describes a pattern within an HTTP request that a <a class="api" href="https://javadoc.io/doc/org.creativescala/krop-docs_3/latest/krop/route/Route.html">Route</a> attempts to match. It can also create an HTTP request that the <code>Request</code> will match. This so-called <em>reverse routing</em> allows creating clients that will call an endpoint.</p>
            <p>A <code>Request</code> always matches an HTTP method and a <a href="paths.html">Path</a>. It may match other components of a request as well. It may also extract elements from the path, query parameters, and other parts of the request. These are passed to the <code>Route</code> handler.</p>
            
            <h2 id="the-request-type" class="section">The Request Type</h2>
            <p>You can usually avoid writing <a class="api" href="https://javadoc.io/doc/org.creativescala/krop-docs_3/latest/krop/route/Request.html">Request</a> types explicitly, but in case you have to write them down a <a class="api" href="https://javadoc.io/doc/org.creativescala/krop-docs_3/latest/krop/route/Request.html">Request</a> is defined as</p>
            <pre><code class="nohighlight"><span class="type-name">Request</span><span>[</span><span class="type-name">P</span><span> &lt;: </span><span class="type-name">Tuple</span><span>, </span><span class="type-name">Q</span><span> &lt;: </span><span class="type-name">Tuple</span><span>, </span><span class="type-name">I</span><span> &lt;: </span><span class="type-name">Tuple</span><span>, </span><span class="type-name">O</span><span> &lt;: </span><span class="type-name">Tuple</span><span>]</span></code></pre>
            <p>where</p>
            <ul>
              <li><code>P</code> is the type of any path parameters extracted from the <a class="api" href="https://javadoc.io/doc/org.creativescala/krop-docs_3/latest/krop/route/Path.html">Path</a>; </li>
              <li><code>Q</code> is the type of any query parameters extracted from the <a class="api" href="https://javadoc.io/doc/org.creativescala/krop-docs_3/latest/krop/route/Path.html">Path</a>; </li>
              <li><code>I</code> is the type of all the values extracted from the <a class="api" href="https://javadoc.io/doc/org.creativescala/krop-docs_3/latest/krop/route/Request.html">Request</a>; and</li>
              <li><code>O</code> is all type of all the values need to construct a HTTP request matched by this <a class="api" href="https://javadoc.io/doc/org.creativescala/krop-docs_3/latest/krop/route/Request.html">Request</a>.</li>
            </ul>
            
            <h2 id="creating-requests" class="section">Creating Requests</h2>
            <p><code>Requests</code> are created by calling the method on the <code>Request</code> object that corresponds to the HTTP method of interest. For example, <code>Request.get</code> for a GET request, <code>Request.post</code> for a POST request, and so on. Thesse methods all accept a <a class="api" href="https://javadoc.io/doc/org.creativescala/krop-docs_3/latest/krop/route/Path.html">Path</a>, as described in the <a href="paths.html">next section</a>, which is the only required part of a <code>Request</code> in addition to the HTTP method.</p>
            <p>Here is an example that matches a GET request to the path <code>/user/&lt;int&gt;</code>, where <code>&lt;int&gt;</code> is an integer.</p>
            <pre><code class="nohighlight"><span class="type-name">Request</span><span>.</span><span class="identifier">get</span><span>(</span><span class="type-name">Path</span><span> / </span><span class="string-literal">&quot;user&quot;</span><span> / </span><span class="type-name">Param</span><span>.</span><span class="identifier">int</span><span>)</span></code></pre>
            <p>Working with paths is quite complex, so this has <a href="paths.html">it&#39;s own documentation</a>.</p>
            <p>You can optionally match and extract values from the headers and entity of a HTTP request. If you want to extract match or extract values from the headers, you must call these methods before you call methods that deal with the entity. This design makes it a bit easier to deal with the types inside <a class="api" href="https://javadoc.io/doc/org.creativescala/krop-docs_3/latest/krop/route/Request.html">Request</a>.</p>
            
            <h3 id="dealing-with-headers" class="section">Dealing with Headers</h3>
            <p>You can extract the value of any particular header in the HTTP request, and make that value available to the request handler. Alternatively you can ensure that the header exists and has a particular value, but not make that value availabe to the handler.</p>
            <p>There are two variants of the <code>extractHeader</code> method, which will get the value of a header and make it available to the handler. In the first variant you specify just the type of the header, which is usually found in the <code>org.https4s.headers</code> package.</p>
            <p>Here is an example the extracts the value associated with the <code>Content-Type</code> header.</p>
            
            <h2 id="entities" class="section">Entities</h2>
            <p>Calling the <code>withEntity</code> method on a <code>Request</code> allows one to specify an <a class="api" href="https://javadoc.io/doc/org.creativescala/krop-docs_3/latest/krop/route/Entity.html">Entity</a>, which is responsible for extracting data from an HTTP request. The <code>Entity</code> is responsible for checking the HTTP Content-Type header, and, if it matches, decoding the HTTP entity into a Scala value.</p>
            <p>Here&#39;s an example of a <code>Request</code> that extracts HTML content as a <code>String</code> value.</p>
            <pre><code class="nohighlight"><span class="keyword">val</span><span> </span><span class="identifier">html</span><span> = </span><span class="type-name">Request</span><span>.</span><span class="identifier">get</span><span>(</span><span class="type-name">Path</span><span>.</span><span class="identifier">root</span><span>).</span><span class="identifier">withEntity</span><span>(</span><span class="type-name">Entity</span><span>.</span><span class="identifier">html</span><span>)</span></code></pre>
            <p>There are several predefined <code>Entity</code> values on the companion object, but you can easily create your own if needed.</p>
            <p class="nextPage"><a href="paths.html">Paths→</a></p>
        </main>
        <footer>Creative Scala is copyright Noel Welsh</footer>
    </div>

    </div>
</body>

</html>
